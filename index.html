<!DOCTYPE html>
<html lang="nl" data-theme="dark">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0, user-scalable=yes, viewport-fit=cover">
    <meta name="theme-color" content="#1a1d29">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="apple-mobile-web-app-title" content="FlowChat Pro">
    <meta name="description" content="Professional team messaging platform">
    <title>FlowChat Pro - Team Messaging</title>
    <link rel="manifest" href="manifest.json">
    <link rel="stylesheet" href="styles.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=IBM+Plex+Sans:wght@400;500;600;700&family=JetBrains+Mono:wght@400;500&display=swap" rel="stylesheet">
</head>
<body>
    <!-- Login Screen -->
    <div id="loginScreen" class="screen active">
        <div class="login-wrapper">
            <div class="login-left">
                <div class="brand-section">
                    <div class="brand-logo">
                        <svg width="48" height="48" viewBox="0 0 48 48" fill="none">
                            <rect width="48" height="48" rx="12" fill="url(#brandGradient)"/>
                            <path d="M14 24L20 18L26 24L20 30L14 24Z" fill="white" opacity="0.9"/>
                            <path d="M22 24L28 18L34 24L28 30L22 24Z" fill="white" opacity="0.6"/>
                            <defs>
                                <linearGradient id="brandGradient" x1="0" y1="0" x2="48" y2="48">
                                    <stop offset="0%" stop-color="#4F46E5"/>
                                    <stop offset="100%" stop-color="#7C3AED"/>
                                </linearGradient>
                            </defs>
                        </svg>
                    </div>
                    <h1 class="brand-title">FlowChat Pro</h1>
                    <p class="brand-subtitle">Professional team communication platform</p>
                </div>
                
                <div class="features-list">
                    <div class="feature-item">
                        <svg width="20" height="20" viewBox="0 0 20 20" fill="none">
                            <path d="M16.5 10C16.5 13.5899 13.5899 16.5 10 16.5C6.41015 16.5 3.5 13.5899 3.5 10C3.5 6.41015 6.41015 3.5 10 3.5C13.5899 3.5 16.5 6.41015 16.5 10Z" stroke="currentColor" stroke-width="1.5"/>
                            <path d="M7 10L9 12L13 8" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"/>
                        </svg>
                        <span>Real-time messaging</span>
                    </div>
                    <div class="feature-item">
                        <svg width="20" height="20" viewBox="0 0 20 20" fill="none">
                            <path d="M16.5 10C16.5 13.5899 13.5899 16.5 10 16.5C6.41015 16.5 3.5 13.5899 3.5 10C3.5 6.41015 6.41015 3.5 10 3.5C13.5899 3.5 16.5 6.41015 16.5 10Z" stroke="currentColor" stroke-width="1.5"/>
                            <path d="M7 10L9 12L13 8" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"/>
                        </svg>
                        <span>File sharing & media</span>
                    </div>
                    <div class="feature-item">
                        <svg width="20" height="20" viewBox="0 0 20 20" fill="none">
                            <path d="M16.5 10C16.5 13.5899 13.5899 16.5 10 16.5C6.41015 16.5 3.5 13.5899 3.5 10C3.5 6.41015 6.41015 3.5 10 3.5C13.5899 3.5 16.5 6.41015 16.5 10Z" stroke="currentColor" stroke-width="1.5"/>
                            <path d="M7 10L9 12L13 8" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"/>
                        </svg>
                        <span>Rich text formatting</span>
                    </div>
                    <div class="feature-item">
                        <svg width="20" height="20" viewBox="0 0 20 20" fill="none">
                            <path d="M16.5 10C16.5 13.5899 13.5899 16.5 10 16.5C6.41015 16.5 3.5 13.5899 3.5 10C3.5 6.41015 6.41015 3.5 10 3.5C13.5899 3.5 16.5 6.41015 16.5 10Z" stroke="currentColor" stroke-width="1.5"/>
                            <path d="M7 10L9 12L13 8" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"/>
                        </svg>
                        <span>Secure & encrypted</span>
                    </div>
                </div>
            </div>
            
            <div class="login-right">
                <div class="auth-card">
                    <div class="auth-tabs">
                        <button class="auth-tab active" data-tab="login">Sign In</button>
                        <button class="auth-tab" data-tab="register">Create Account</button>
                    </div>

                    <!-- Login Form -->
                    <form id="loginForm" class="auth-form active">
                        <div class="form-group">
                            <label for="loginUsername">Username</label>
                            <input 
                                type="text" 
                                id="loginUsername" 
                                placeholder="Enter your username" 
                                maxlength="20"
                                required
                            >
                        </div>
                        <div class="form-group">
                            <label for="loginPassword">Password</label>
                            <input 
                                type="password" 
                                id="loginPassword" 
                                placeholder="Enter your password" 
                                minlength="6"
                                required
                            >
                        </div>
                        <div id="loginError" class="error-message"></div>
                        <button type="submit" class="btn-primary">
                            Sign In
                            <svg width="16" height="16" viewBox="0 0 16 16" fill="none">
                                <path d="M3 8H13M13 8L9 4M13 8L9 12" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"/>
                            </svg>
                        </button>
                    </form>

                    <!-- Register Form -->
                    <form id="registerForm" class="auth-form">
                        <div class="form-group">
                            <label for="registerUsername">Username</label>
                            <input 
                                type="text" 
                                id="registerUsername" 
                                placeholder="Choose a username" 
                                maxlength="20"
                                minlength="3"
                                required
                            >
                            <small>Minimum 3 characters</small>
                        </div>
                        <div class="form-group">
                            <label for="registerEmail">Email Address</label>
                            <input 
                                type="email" 
                                id="registerEmail" 
                                placeholder="your.email@company.com"
                                required
                            >
                        </div>
                        <div class="form-group">
                            <label for="registerPassword">Password</label>
                            <input 
                                type="password" 
                                id="registerPassword" 
                                placeholder="Create a secure password" 
                                minlength="6"
                                required
                            >
                            <small>Minimum 6 characters</small>
                        </div>
                        <div id="registerError" class="error-message"></div>
                        <button type="submit" class="btn-primary">
                            Create Account
                            <svg width="16" height="16" viewBox="0 0 16 16" fill="none">
                                <path d="M3 8H13M13 8L9 4M13 8L9 12" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"/>
                            </svg>
                        </button>
                    </form>
                </div>
            </div>
        </div>
    </div>

    <!-- Chat Screen -->
    <div id="chatScreen" class="screen">
        <div class="app-layout">
            <!-- Sidebar -->
            <aside class="sidebar" id="sidebar">
                <div class="sidebar-header">
                    <div class="workspace-info">
                        <div class="workspace-logo">
                            <svg width="32" height="32" viewBox="0 0 32 32" fill="none">
                                <rect width="32" height="32" rx="8" fill="url(#sidebarGradient)"/>
                                <path d="M10 16L13 13L16 16L13 19L10 16Z" fill="white" opacity="0.9"/>
                                <path d="M14 16L17 13L20 16L17 19L14 16Z" fill="white" opacity="0.6"/>
                                <defs>
                                    <linearGradient id="sidebarGradient" x1="0" y1="0" x2="32" y2="32">
                                        <stop offset="0%" stop-color="#4F46E5"/>
                                        <stop offset="100%" stop-color="#7C3AED"/>
                                    </linearGradient>
                                </defs>
                            </svg>
                        </div>
                        <div class="workspace-text">
                            <h2>FlowChat Pro</h2>
                            <span class="workspace-status">Active</span>
                        </div>
                    </div>
                </div>

                <div class="sidebar-section">
                    <div class="section-header">
                        <h3>Channels</h3>
                    </div>
                    <div class="channel-list">
                        <a href="#" class="channel-item active">
                            <span class="channel-icon">#</span>
                            <span class="channel-name">general</span>
                        </a>
                    </div>
                </div>

                <div class="sidebar-section">
                    <div class="section-header">
                        <h3>Online Users</h3>
                        <span id="onlineCount" class="user-count">0</span>
                    </div>
                    <div id="usersList" class="users-list">
                        <!-- Users dynamically loaded -->
                    </div>
                </div>

                <div class="sidebar-footer">
                    <div class="current-user-card" id="currentUserCard">
                        <div class="user-avatar">
                            <span class="avatar-text"></span>
                            <span class="status-dot"></span>
                        </div>
                        <div class="user-info">
                            <span class="user-name"></span>
                            <span class="user-status">Online</span>
                        </div>
                        <button class="btn-icon-small" id="userMenuBtn" title="User settings">
                            <svg width="16" height="16" viewBox="0 0 16 16" fill="none">
                                <circle cx="8" cy="4" r="1.5" fill="currentColor"/>
                                <circle cx="8" cy="8" r="1.5" fill="currentColor"/>
                                <circle cx="8" cy="12" r="1.5" fill="currentColor"/>
                            </svg>
                        </button>
                    </div>
                </div>
            </aside>

            <!-- Main Chat Area -->
            <main class="main-content">
                <!-- Chat Header -->
                <header class="chat-header">
                    <div class="header-left">
                        <button class="btn-icon mobile-menu-btn" id="mobileMenuBtn">
                            <svg width="20" height="20" viewBox="0 0 20 20" fill="none">
                                <path d="M3 7H17M3 13H17" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"/>
                            </svg>
                        </button>
                        <span class="channel-icon-large">#</span>
                        <div class="channel-info">
                            <h1>general</h1>
                            <p>Team-wide announcements and discussions</p>
                        </div>
                    </div>
                    <div class="header-actions">
                        <button class="btn-icon" id="searchBtn" title="Search messages (Ctrl+F)">
                            <svg width="20" height="20" viewBox="0 0 20 20" fill="none">
                                <circle cx="9" cy="9" r="5.5" stroke="currentColor" stroke-width="1.5"/>
                                <path d="M13 13L16.5 16.5" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"/>
                            </svg>
                        </button>
                        <button class="btn-icon" id="themeToggle" title="Toggle theme (Ctrl+T)">
                            <svg width="20" height="20" viewBox="0 0 20 20" fill="none">
                                <circle cx="10" cy="10" r="4" stroke="currentColor" stroke-width="1.5"/>
                                <path d="M10 2V4M10 16V18M18 10H16M4 10H2M15.5 4.5L14.5 5.5M5.5 14.5L4.5 15.5M15.5 15.5L14.5 14.5M5.5 5.5L4.5 4.5" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"/>
                            </svg>
                        </button>
                        <button class="btn-icon" id="logoutBtn" title="Sign out">
                            <svg width="20" height="20" viewBox="0 0 20 20" fill="none">
                                <path d="M13 3H16C16.5304 3 17.0391 3.21071 17.4142 3.58579C17.7893 3.96086 18 4.46957 18 5V15C18 15.5304 17.7893 16.0391 17.4142 16.4142C17.0391 16.7893 16.5304 17 16 17H13M8 13L12 9M12 9L8 5M12 9H2" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"/>
                            </svg>
                        </button>
                    </div>
                </header>

                <!-- Search Panel (Hidden by default) -->
                <div id="searchPanel" class="search-panel">
                    <div class="search-input-wrapper">
                        <svg width="16" height="16" viewBox="0 0 16 16" fill="none">
                            <circle cx="7" cy="7" r="4.5" stroke="currentColor" stroke-width="1.5"/>
                            <path d="M10.5 10.5L13.5 13.5" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"/>
                        </svg>
                        <input type="text" id="searchInput" placeholder="Search messages..." />
                        <button class="btn-icon-small" id="closeSearchBtn">
                            <svg width="16" height="16" viewBox="0 0 16 16" fill="none">
                                <path d="M12 4L4 12M4 4L12 12" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"/>
                            </svg>
                        </button>
                    </div>
                    <div id="searchResults" class="search-results"></div>
                </div>

                <!-- Messages Container -->
                <div class="messages-wrapper" id="messagesWrapper">
                    <div id="messagesContainer" class="messages-container">
                        <div class="welcome-message">
                            <div class="welcome-icon">
                                <svg width="48" height="48" viewBox="0 0 48 48" fill="none">
                                    <rect width="48" height="48" rx="12" fill="url(#welcomeGradient)"/>
                                    <path d="M24 16V24M24 24V32M24 24H32M24 24H16" stroke="white" stroke-width="2" stroke-linecap="round"/>
                                    <defs>
                                        <linearGradient id="welcomeGradient" x1="0" y1="0" x2="48" y2="48">
                                            <stop offset="0%" stop-color="#4F46E5"/>
                                            <stop offset="100%" stop-color="#7C3AED"/>
                                        </linearGradient>
                                    </defs>
                                </svg>
                            </div>
                            <h3>Welcome to #general</h3>
                            <p>This is the beginning of the #general channel. Start a conversation by sending your first message.</p>
                        </div>
                    </div>
                    
                    <!-- Typing Indicator -->
                    <div id="typingIndicator" class="typing-indicator">
                        <div class="typing-avatar"></div>
                        <div class="typing-content">
                            <span class="typing-user"></span>
                            <div class="typing-dots">
                                <span></span><span></span><span></span>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Message Input Area -->
                <div class="input-container">
                    <!-- Formatting Toolbar -->
                    <div class="formatting-toolbar">
                        <button class="format-btn" data-format="bold" title="Bold (Ctrl+B)">
                            <svg width="16" height="16" viewBox="0 0 16 16" fill="none">
                                <path d="M4 3H9C10.1046 3 11 3.89543 11 5C11 6.10457 10.1046 7 9 7H4V3ZM4 7H10C11.1046 7 12 7.89543 12 9C12 10.1046 11.1046 11 10 11H4V7Z" stroke="currentColor" stroke-width="1.5" stroke-linejoin="round"/>
                            </svg>
                        </button>
                        <button class="format-btn" data-format="italic" title="Italic (Ctrl+I)">
                            <svg width="16" height="16" viewBox="0 0 16 16" fill="none">
                                <path d="M8 3H13M3 13H8M10 3L6 13" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"/>
                            </svg>
                        </button>
                        <button class="format-btn" data-format="code" title="Code (Ctrl+E)">
                            <svg width="16" height="16" viewBox="0 0 16 16" fill="none">
                                <path d="M5 5L2 8L5 11M11 5L14 8L11 11" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"/>
                            </svg>
                        </button>
                        <div class="toolbar-divider"></div>
                        <button class="format-btn" id="attachBtn" title="Attach file">
                            <svg width="16" height="16" viewBox="0 0 16 16" fill="none">
                                <path d="M13 7.5V11C13 12.6569 11.6569 14 10 14C8.34315 14 7 12.6569 7 11V5C7 3.89543 7.89543 3 9 3C10.1046 3 11 3.89543 11 5V9.5C11 10.0523 10.5523 10.5 10 10.5C9.44772 10.5 9 10.0523 9 9.5V6" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"/>
                            </svg>
                        </button>
                        <button class="format-btn" id="imageBtn" title="Upload image">
                            <svg width="16" height="16" viewBox="0 0 16 16" fill="none">
                                <rect x="2" y="2" width="12" height="12" rx="2" stroke="currentColor" stroke-width="1.5"/>
                                <circle cx="5.5" cy="5.5" r="1" fill="currentColor"/>
                                <path d="M14 10L11 7L7 11L5 9L2 12" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
                            </svg>
                        </button>
                        <input type="file" id="fileInput" accept="*/*" style="display: none" />
                        <input type="file" id="imageInput" accept="image/*" style="display: none" />
                    </div>

                    <!-- Message Form -->
                    <form id="messageForm" class="message-form">
                        <div class="input-wrapper">
                            <textarea 
                                id="messageInput" 
                                placeholder="Send a message to #general" 
                                rows="1"
                                maxlength="2000"
                            ></textarea>
                            <div class="input-actions">
                                <div class="char-counter">
                                    <span id="charCount">0</span><span class="char-limit">/2000</span>
                                </div>
                                <button type="submit" class="btn-send" id="sendBtn" disabled>
                                    <svg width="20" height="20" viewBox="0 0 20 20" fill="none">
                                        <path d="M18 2L9 11M18 2L12 18L9 11M18 2L2 8L9 11" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
                                    </svg>
                                </button>
                            </div>
                        </div>
                    </form>

                    <!-- File Preview Area -->
                    <div id="filePreview" class="file-preview"></div>
                </div>
            </main>
        </div>
    </div>

    <!-- Context Menu for Messages -->
    <div id="contextMenu" class="context-menu">
        <button class="context-item" data-action="edit">
            <svg width="16" height="16" viewBox="0 0 16 16" fill="none">
                <path d="M11.3333 2L14 4.66667L5.33333 13.3333H2.66667V10.6667L11.3333 2Z" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
            </svg>
            Edit message
        </button>
        <button class="context-item" data-action="copy">
            <svg width="16" height="16" viewBox="0 0 16 16" fill="none">
                <rect x="4" y="4" width="8" height="8" rx="1" stroke="currentColor" stroke-width="1.5"/>
                <path d="M6 4V2.66667C6 2.29848 6.29848 2 6.66667 2H13.3333C13.7015 2 14 2.29848 14 2.66667V9.33333C14 9.70152 13.7015 10 13.3333 10H12" stroke="currentColor" stroke-width="1.5"/>
            </svg>
            Copy text
        </button>
        <div class="context-divider"></div>
        <button class="context-item danger" data-action="delete">
            <svg width="16" height="16" viewBox="0 0 16 16" fill="none">
                <path d="M3 4H13M12 4L11.5 12.5C11.5 13.0523 11.0523 13.5 10.5 13.5H5.5C4.94772 13.5 4.5 13.0523 4.5 12.5L4 4M6.5 2H9.5M6.5 6.5V10.5M9.5 6.5V10.5" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"/>
            </svg>
            Delete message
        </button>
    </div>

    <!-- User Menu Dropdown -->
    <div id="userMenu" class="dropdown-menu">
        <button class="dropdown-item" data-action="profile">
            <svg width="16" height="16" viewBox="0 0 16 16" fill="none">
                <circle cx="8" cy="5" r="2.5" stroke="currentColor" stroke-width="1.5"/>
                <path d="M3 13C3 10.7909 4.79086 9 7 9H9C11.2091 9 13 10.7909 13 13" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"/>
            </svg>
            Profile Settings
        </button>
        <button class="dropdown-item" data-action="preferences">
            <svg width="16" height="16" viewBox="0 0 16 16" fill="none">
                <circle cx="8" cy="8" r="2" stroke="currentColor" stroke-width="1.5"/>
                <path d="M8 2V3M8 13V14M14 8H13M3 8H2M12.5 3.5L11.5 4.5M4.5 11.5L3.5 12.5M12.5 12.5L11.5 11.5M4.5 4.5L3.5 3.5" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"/>
            </svg>
            Preferences
        </button>
        <button class="dropdown-item" data-action="shortcuts">
            <svg width="16" height="16" viewBox="0 0 16 16" fill="none">
                <rect x="2" y="4" width="5" height="5" rx="1" stroke="currentColor" stroke-width="1.5"/>
                <rect x="9" y="4" width="5" height="5" rx="1" stroke="currentColor" stroke-width="1.5"/>
                <rect x="2" y="11" width="5" height="1" rx="0.5" stroke="currentColor" stroke-width="1.5"/>
            </svg>
            Keyboard Shortcuts
        </button>
        <div class="dropdown-divider"></div>
        <button class="dropdown-item" id="logoutMenuBtn">
            <svg width="16" height="16" viewBox="0 0 16 16" fill="none">
                <path d="M10 3H12C12.5304 3 13.0391 3.21071 13.4142 3.58579C13.7893 3.96086 14 4.46957 14 5V11C14 11.5304 13.7893 12.0391 13.4142 12.4142C13.0391 12.7893 12.5304 13 12 13H10M6 10L9 7M9 7L6 4M9 7H2" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"/>
            </svg>
            Sign Out
        </button>
    </div>

    <!-- Keyboard Shortcuts Modal -->
    <div id="shortcutsModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Keyboard Shortcuts</h3>
                <button class="btn-icon-small" id="closeShortcutsBtn">
                    <svg width="16" height="16" viewBox="0 0 16 16" fill="none">
                        <path d="M12 4L4 12M4 4L12 12" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"/>
                    </svg>
                </button>
            </div>
            <div class="modal-body">
                <div class="shortcuts-grid">
                    <div class="shortcut-item">
                        <kbd>Ctrl</kbd> + <kbd>F</kbd>
                        <span>Search messages</span>
                    </div>
                    <div class="shortcut-item">
                        <kbd>Ctrl</kbd> + <kbd>T</kbd>
                        <span>Toggle theme</span>
                    </div>
                    <div class="shortcut-item">
                        <kbd>Ctrl</kbd> + <kbd>B</kbd>
                        <span>Bold text</span>
                    </div>
                    <div class="shortcut-item">
                        <kbd>Ctrl</kbd> + <kbd>I</kbd>
                        <span>Italic text</span>
                    </div>
                    <div class="shortcut-item">
                        <kbd>Ctrl</kbd> + <kbd>E</kbd>
                        <span>Code block</span>
                    </div>
                    <div class="shortcut-item">
                        <kbd>Enter</kbd>
                        <span>Send message</span>
                    </div>
                    <div class="shortcut-item">
                        <kbd>Shift</kbd> + <kbd>Enter</kbd>
                        <span>New line</span>
                    </div>
                    <div class="shortcut-item">
                        <kbd>Esc</kbd>
                        <span>Cancel editing</span>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script src="app.js"></script>
</body>
</html>